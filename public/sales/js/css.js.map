{"version":3,"sources":["css.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"css.js","sourcesContent":["/**\n * file javascript dùng trong các trang CSS\n */\n\n\n/** \n * trang tạo CSS\n * mảng lưu các team đã được set (khi ấn OK trên popup danh sách team)\n * dùng khi thay đổi danh sách team trên popup nhưng đóng popup\n * mà không ấn OK thì khi mở lại vẫn lưu các team cũ\n * @type Array\n */\n$('input').iCheck({\n    checkboxClass: 'icheckbox_minimal-blue',\n    radioClass: 'iradio_minimal-blue'\n}); \n\nvar teamArray = []; \n\n/** \n * Sự kiện ấn vào img calendar thi show calendar\n * @param element x\n*/\nfunction showCalendar(x) {\n    var target = $(x).attr(\"target\");\n    $(\"#\" + target).focus();\n}\n\n\n\n\n\n/**\n * Sự kiện khi click OK trên popup team\n * Thêm các team được chọn vào form tạo CSS\n * @returns void\n */\nfunction set_team_to_css() {\n    var elements = \"\";\n    var str = \"\";\n    teamArray = [];\n    //get team checked\n    $('input[class=team-tree-checkbox]:checked').each(function(){\n        var team_id = $(this).attr(\"data-id\");\n        var team_name = $(this).parent().parent().find('span').text();\n        elements += '<input class=\"team_id\" type=\"hidden\" name=\"teams[' + team_id + ']\" value=\"' + team_name + '\" />';\n        if (str == \"\") {\n            str = team_name;\n        } else {\n            str += ', ' + team_name;\n        }\n        teamArray.push([team_id, team_name]);\n    });\n    \n    $(\".set_team\").html(str);\n    $(\".set_team\").parent().find('.team_id').remove();\n    $(\".set_team\").parent().append(elements);\n    if (str == \"\") {\n        $('#team_id_check').val(\"\")\n    } else {\n        $('#team_id_check').val(\"1\")\n        $(\"#team_id_check-error\").remove();\n    }\n    \n    //close popup\n    $('#teamsModal').modal('hide');\n}\n\n/**\n * Khi ấn nút Set team trên form tạo CSS\n * Set các team đã được chọn từ trước vào cột phải của popup team\n * @returns void\n */\nfunction set_teams_popup() {\n    $('.team-tree-checkbox').iCheck('uncheck');\n    for (var i = 0; i < teamArray.length; i++) {\n        $('.team-tree-checkbox[data-id='+teamArray[i][0]+']').iCheck('check');\n    }\n}\n\n$(document).ready(function () {\n    $(\".project_type input[type=radio]:first-child\").prop('checked', true);\n    $(\".team-tree a\").removeAttr(\"href\");\n    $(\".team-tree a\").attr(\"onclick\", \"change_bgcolor_element(this)\");\n\n    //hide calendar sau khi select\n    $('#start_date').on('changeDate', function () {\n        $(this).datepicker('hide');\n        $('#end_date').focus();\n        $('#start_date').css('color','#555').css('font-size','14px');\n        $('#start_date-error').remove();\n    });\n    \n    $('#end_date').on('changeDate', function () {\n        $(this).datepicker('hide');\n        $('#end_date').css('color','#555').css('font-size','14px');\n        $('#end_date-error').remove();\n    });\n});\n\n$(document).ready(function () {\n    /** Check is firefox */\n    if(navigator.userAgent.toLowerCase().indexOf('firefox') > -1){\n        $(\".date\").css('top','-1px');\n    }\n    /** End check is firefox */\n    \n    jQuery.validator.addMethod(\"greaterThan\",\n        function (value, element, params) {\n            if (!/Invalid|NaN/.test(new Date(value))) {\n                return new Date(value) > new Date($(params).val());\n            }\n\n            return isNaN(value) && isNaN($(params).val())\n                    || (Number(value) > Number($(params).val()));\n        }, 'Must be greater than {0}.'\n    );\n\n    $(\"#frm_create_css\").validate({\n        rules: {\n            japanese_name: \"required\",\n            team_id_check: \"required\",\n            company_name: \"required\",\n            customer_name: \"required\",\n            project_name: \"required\",\n            pm_name: \"required\",\n            brse_name: \"required\",\n            start_date: \"required\",\n            end_date: {\n                required: true,\n                greaterThan: \"#start_date\",\n            },\n        },\n        messages: {\n            japanese_name: \"Vui lòng điền tên tiếng Nhật của bạn\",\n            team_id_check: \"Vui lòng chọn team cho dự án\",\n            company_name: \"Vui lòng nhập tên công ty\",\n            customer_name: \"Vui lòng nhập tên khách hàng\",\n            project_name: \"Vui lòng nhập tên dự án\",\n            pm_name: \"Vui lòng nhập tên PM\",\n            brse_name: \"Vui lòng nhập tên BrSE\",\n            start_date: \"Vui lòng nhập ngày bắt đầu dự án\",\n            end_date: {\n                required: 'Vui lòng nhập ngày kết thúc dự án',\n                greaterThan: 'Ngày kết thúc phải lớn hơn ngày bắt đầu',\n            }\n        }\n    });\n});\n\n/**\n * Trang lam danh gia\n * Khi khach hang danh danh gia mot tieu chi\n * Tinh tong diem realtime\n * @returns void\n */\nfunction totalMark(elem) {\n    var point = $(elem).rateit('value');\n    var dataQuestionid = $(elem).attr('data-questionid');\n    if(point < 3){\n        var text = $(\".comment-question[data-questionid='\"+dataQuestionid+\"']\").val();\n        if($.trim(text) == ''){\n            $(\".comment-question[data-questionid='\"+dataQuestionid+\"']\").css(\"border\",\"1px solid red\");\n        }\n    }else{\n        $(\".comment-question[data-questionid='\"+dataQuestionid+\"']\").css(\"border\",\"1px solid #d2d6de\");\n    }\n    \n    $(\".diem\").html(getTotalPoint());\n    $(\".diem-fixed\").html('Tổng điểm: ' + getTotalPoint());\n}\n\nfunction getTotalPoint(){\n    var tongSoCauDanhGia = 0;\n    var total = 0;\n    $(\".rateit\").each(function(){\n        var danhGia = parseInt($(this).rateit('value'));\n        if($(this).attr(\"id\") != \"tongquat\"){\n            if(danhGia > 0){\n                tongSoCauDanhGia++;\n                total += danhGia;\n            }\n        }\n    });\n    \n    var diemTongQuat = parseInt($(\"#tongquat\").rateit('value'));\n    if(tongSoCauDanhGia == 0){\n        total = diemTongQuat * 20;\n    }else{\n        total = diemTongQuat * 4 + total/(tongSoCauDanhGia * 5) * 80;\n    }\n    \n    return total.toFixed(2);\n}\n\n/**\n * show or hide total point at bottom right make css page\n */\n$(window).scroll(function(){\n    if($('.visible-check').visible()){\n        $(\".diem-fixed\").hide();\n    } else {\n        $(\".diem-fixed\").show();\n    }\n});\n\n/**\n * Function confirm CSS\n * @returns void\n */\nfunction confirm(arrayValidate){\n    var invalid = false;\n    var strInvalid = \"\";\n    $('#modal-confirm').modal('hide');\n    $(\".comment-question\").css(\"border-color\",\"#d2d6de\");\n    $(\"#tongquat\").css(\"border\",\"none\");\n    $(\"#comment-tongquat\").css(\"border-color\",\"#d2d6de\");\n    \n    var arrayValidate = $.parseJSON(arrayValidate);\n    var makeName = $.trim($(\"#make_name\").val());\n    var makeEmail = $.trim($(\"#make_email\").val());\n    if(makeName == \"\"){\n        $(\"#make_name\").css(\"border\",\"1px solid red\");\n        strInvalid += '<div>'+arrayValidate['nameRequired']+'</div>';\n        invalid = true;\n        $(\"#make_name\").focus();\n    }\n    \n    if(makeEmail == \"\"){\n        $(\"#make_email\").css(\"border\",\"1px solid red\");\n        strInvalid += '<div>'+arrayValidate['emailRequired']+'</div>';\n        invalid = true;\n        if(makeName != \"\"){\n            $(\"#make_email\").focus();\n        }\n    }else if( !isValidEmailAddress( makeEmail ) ){\n        $(\"#make_email\").css(\"border\",\"1px solid red\");\n        strInvalid += '<div>'+arrayValidate['emailAddress']+'</div>';\n        invalid = true;\n        if(makeName != \"\"){\n            $(\"#make_email\").focus();\n        }\n    }\n    \n    var diemTongQuat = parseInt($(\"#tongquat\").rateit('value'));\n    if(diemTongQuat == 0){\n        invalid = true;\n        strInvalid += '<div>'+arrayValidate['totalMarkValidateRequired']+'</div>';\n        $(\"#tongquat\").css(\"border\",\"1px solid red\");\n    }\n    \n    var arrValidate = [];\n    $(\".rateit\").each(function(){\n        var danhGia = parseInt($(this).rateit('value'));\n       \n            if(danhGia > 0 && danhGia < 3){\n                if($(\".comment-question[data-questionid='\"+$(this).attr(\"data-questionid\")+\"']\").val() == \"\"){\n                    arrValidate.push($(this).attr(\"data-questionid\"));\n                }\n            }\n        \n    }); \n    \n    if(arrValidate.length > 0) {\n        for(var i=0; i<arrValidate.length; i++){\n            $(\".comment-question[data-questionid='\"+arrValidate[i]+\"']\").css(\"border\",\"1px solid red\");\n        }\n        strInvalid += '<div>'+arrayValidate['questionCommentRequired']+'</div>';\n        invalid = true;\n    }\n    \n    if(invalid){\n        $('#modal-alert .modal-body').html(strInvalid);\n        $('#modal-alert').modal('show');\n        return false;\n    }\n    \n    $('#modal-confirm .modal-body').html(\"Số điểm hiện tại của CSS là \"+$(\".diem\").html()+\" Điểm. Bạn có chắc muốn hoàn thành CSS tại đây không?\");\n    $('#modal-confirm').modal('show');\n}\n\n/**\n * Validate then insert CSS result into database\n * @param string token\n * @param int cssId\n * @param json arrayValidate\n * @returns void\n */\nfunction submit(token, cssId){ \n    var make_name = $(\"#make_name\").val();\n    var make_email = $(\"#make_email\").val();\n    var totalMark = getTotalPoint();\n    var proposed = $(\"#proposed\").val();\n    var arrayQuestion = [];\n    $(\".rateit\").each(function(){\n        var danhGia = parseInt($(this).rateit('value'));\n        var questionId = $(this).attr(\"data-questionid\");\n        var diem = danhGia;\n        var comment = $(\".comment-question[data-questionid='\"+$(this).attr(\"data-questionid\")+\"']\").val();\n        arrayQuestion.push([questionId,diem,comment]);\n    });\n    \n    $(\".apply-click-modal\").show();\n    $.ajax({\n        url: baseUrl + '/css/saveResult',\n        type: 'post',\n        data: {\n            _token: token, \n            arrayQuestion: arrayQuestion, \n            make_name: make_name, \n            make_email: make_email, \n            totalMark: totalMark,\n            proposed: proposed,\n            cssId: cssId\n        },\n    })\n    .done(function (data) { \n        location.href = baseUrl + \"/css/success/\"+cssId;\n    })\n    .fail(function () {\n        alert(\"Ajax failed to fetch data\");\n    })\n}\n\n/**\n * Function validate email address\n * @param string emailAddress\n * @returns boolean\n */\nfunction isValidEmailAddress(emailAddress) {\n    var pattern = /^([a-z\\d!#$%&'*+\\-\\/=?^_`{|}~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+(\\.[a-z\\d!#$%&'*+\\-\\/=?^_`{|}~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+)*|\"((([ \\t]*\\r\\n)?[ \\t]+)?([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))*(([ \\t]*\\r\\n)?[ \\t]+)?\")@(([a-z\\d\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|[a-z\\d\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF][a-z\\d\\-._~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]*[a-z\\d\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])\\.)+([a-z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|[a-z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF][a-z\\d\\-._~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]*[a-z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])\\.?$/i;\n    return pattern.test(emailAddress);\n}\n\nfunction copyToClipboard(element) {\n  var $temp = $(\"<input>\");\n  $(\"body\").append($temp);\n  $temp.val($(element).attr('data-href')).select();\n  document.execCommand(\"copy\");\n  $temp.remove();\n  \n  $(\"#modal-clipboard\").modal('show');\n}\n"],"sourceRoot":"/source/"}