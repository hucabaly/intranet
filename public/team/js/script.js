jQuery(document).ready(function(t){function a(a){var e=a.data("id");a.is(":checked")?t(".team-group-function[data-id="+e+"]").show():t(".team-group-function[data-id="+e+"]").hide()}t("input.input-is-function").each(function(e,i){a(t(this))}),t("input.input-is-function").on("change",function(e){a(t(this))}),htmlAddTeamPositonOrigin=t(".group-team-position-orgin").html(),t(".group-team-position-orgin").remove(),dataIdLast=jQuery(".box-form-team-position").children(".group-team-position").length,dataIdLast?dataIdLast=parseInt(dataIdLast):dataIdLast=0,1==dataIdLast&&t(".box-form-team-position .group-team-position .input-remove").addClass("warning-action"),t(document).on("click",".input-team-position.input-add-new button",function(a){dataIdLast++,htmlAddTeamPositon=t(htmlAddTeamPositonOrigin),htmlAddTeamPositon.find(".input-team-position.input-team select").attr("name","team["+dataIdLast+"][team]"),htmlAddTeamPositon.find(".input-team-position.input-position select").attr("name","team["+dataIdLast+"][position]"),t(".box-form-team-position").append(htmlAddTeamPositon),t(".box-form-team-position .group-team-position .input-remove").removeClass("warning-action"),1==t(".box-form-team-position").children(".group-team-position").length&&t(".box-form-team-position .group-team-position .input-remove").addClass("warning-action"),t("input[name=employee_team_change]").val(1)}),t(document).on("click",".input-team-position.input-remove",function(a){teamLength=t(".box-form-team-position").children(".group-team-position").length,teamLength>1&&(t(this).parents(".group-team-position").remove(),t("input[name=employee_team_change]").val(1)),2==teamLength&&t(".box-form-team-position .group-team-position .input-remove").addClass("warning-action")}),t(document).on("change",".group-team-position select",function(a){t("input[name=employee_team_change]").val(1)}),t("#employee-role-form").on("hide.bs.modal",function(a){htmlRoleList="",t(this).find(".checkbox input:checked").each(function(a,e){htmlRoleList+="<li><span>",htmlRoleList+=t(this).parent().text().trim(),htmlRoleList+="</li></span>"}),t("ul.employee-roles").html(htmlRoleList),t("input[name=employee_role_change]").val(1)}),lengthTrTableRule=t(".team-rule-wrapper table.table-team-rule tbody tr").length,t(".team-rule-wrapper table.table-team-rule tbody tr:last-child .form-input-dropdown").addClass("input-rule-last"),t(".team-rule-wrapper table.table-team-rule tbody tr:nth-child("+(lengthTrTableRule-1)+") .form-input-dropdown").addClass("input-rule-last");var e=t(".team-rule-wrapper .table-responsive").css("padding-bottom");t(".input-rule-last").on("show.bs.dropdown",function(){t(".team-rule-wrapper .table-responsive").css("padding-bottom","90px")}),t(".input-rule-last").on("hide.bs.dropdown",function(){t(".team-rule-wrapper .table-responsive").css("padding-bottom",e)})}),function(t){t.fn.employeeSkillAction=function(a){function e(a,e,i){e&&void 0!=e||(e=null);var l=a.attr("data-id");l=parseInt(l);var o=a.data("group");return h[o]=1,i&&"delete"==i?(delete p[o][l],t("input[name=employee_skill]").val(t.param(p)),t("input[name=employee_skill_change]").val(t.param(h)),!0):(l||(l=c[o],c[o]++),inputIdCheck=a.find("input[data-col=id]"),flagCheckInputSame=!1,inputIdCheck.length&&inputIdCheck.val()&&(dataTbl=inputIdCheck.data("tbl"),t.each(p[o],function(t,a){return l==t||(a[dataTbl].id==inputIdCheck.val()?(flagCheckInputSame=!0,!1):void 0)})),flagCheckInputSame?(alert(r["same_"+o]),!0):(a.find(".input-skill-modal[data-tbl][data-col]").each(function(a,i){inputType=t(this).attr("type"),dataCol=t(this).data("col"),dataTbl=t(this).data("tbl"),dataCol&&dataTbl&&(valueInput=t(this).val(),void 0==p[o][l]&&(p[o][l]={}),void 0==p[o][l][dataTbl]&&(p[o][l][dataTbl]={}),void 0==p[o][l][dataTbl][dataCol]&&(p[o][l][dataTbl][dataCol]={}),"file"==inputType&&t(this).parents(".input-box-img-preview").length&&(e&&e.image&&e.image_path?(valueInput=e.image,p[o][l][dataTbl].image_path=e.image_path):(valueInput=t(this).parents(".input-box-img-preview").find("img[data-tbl="+dataTbl+"][data-col="+dataCol+"_preview]").attr("src"),p[o][l][dataTbl].image_path="")),p[o][l][dataTbl][dataCol]=valueInput)}),t("input[name=employee_skill]").val(t.param(p)),void t("input[name=employee_skill_change]").val(t.param(h))))}function i(a){skillListWrapper=t(".employee-skill-box-wrapper[data-group="+a+"] .employee-skill-items"),skillListItem0=skillListWrapper.find(".esbw-item[data-id=0]");var e="";t.each(p[a],function(a,i){return 0==a||(skillItemNew=skillListItem0.clone(),skillItemNew.attr("data-id",a),skillItemNew.removeClass("hidden"),skillItemNew.find("[data-tbl][data-col]").each(function(){dataTbl=t(this).data("tbl"),dataCol=t(this).data("col"),t(this).is("img")?skillItemNew.find("[data-tbl="+dataTbl+"][data-col="+dataCol+"]").attr("src",i[dataTbl][dataCol]):(valueInput=i[dataTbl][dataCol],domInput=skillItemNew.find("[data-tbl="+dataTbl+"][data-col="+dataCol+"]"),dataDateFormat=domInput.data("date-format"),dataLabelFormat=domInput.data("label-format"),dataDateFormat?(date=new Date(valueInput),valueInput=getDateFormat(date,dataDateFormat)):dataLabelFormat&&(valueInput=m[dataLabelFormat][valueInput]),domInput.html(valueInput))}),void(e+=skillItemNew[0].outerHTML))}),skillListWrapper.children(":not(.esbw-item)").html(e)}t(".employee-skill-modal").on("shown.bs.modal",function(a){idModal=t(this).attr("id"),idModal?idModal="#"+idModal+" ":idModal="",t(this).find(".input-box-img-preview .skill-modal-image").verticalCenter({parent:idModal+".input-box-img-preview .skill-modal-image-preview"})});var l,o,n,d,s,p,r,m,u={},h={schools:0},c={};s=t("input[name=_token]").val(),u=a.autoComplete,d=a.imagePreviewImageDefault,c=a.employeeSkillNo,p=a.employeeSkill,r=a.messageError,m=a.labelFormat,t(document).on("click",".employee-skill-box-wrapper [data-modal=true]",function(a){n=t(this).parents(".esbw-item").data("id"),n&&void 0!=n||(n=0),l=t(this).parents(".employee-skill-box-wrapper").data("group"),o=t(this).parents(".employee-skill-box-wrapper").data("href"),dataIsChange=t(this).parents(".employee-skill-box-wrapper").data("change"),t(o).modal("show"),n?t(o).find(".btn-delete.btn-action").removeClass("hidden"):t(o).find(".btn-delete.btn-action").addClass("hidden"),t(o).on("shown.bs.modal",function(a){t(this).find(".input-skill-modal").removeAttr("disabled").val(""),t(this).find("img.college-image-preview").attr("src",d),t(this).find(".input-skill-modal").each(function(a,e){inputType=t(this).attr("type"),dataCol=t(this).data("col"),dataTbl=t(this).data("tbl"),dataCol&&dataTbl&&(valueId=p[l][n][dataTbl].id,value=p[l][n][dataTbl][dataCol],"file"==inputType?(t(this).parents(".input-box-img-preview").length&&t(this).parents(".input-box-img-preview").find("img[data-tbl="+dataTbl+"][data-col="+dataCol+"_preview]").attr("src",value),valueId&&(t(this).hasClass("not-auto")?t(this).val(""):t(this).attr("disabled",!0).val(""))):(value&&void 0!=value?value=t.parseHTML(value)[0].nodeValue:value="",valueId&&!t(this).data("autocomplete")&&"hidden"!=t(this).attr("type")?t(this).hasClass("not-auto")?t(this).val(value):t(this).attr("disabled",!0).val(value):t(this).val(value),t(this).is("select")&&t(this).val(value).trigger("change")))}),t(this).attr("data-id",n)})}),t(".employee-skill-modal input[data-autocomplete=true]").each(function(){var a=t(this).data("tbl");t(this).autocomplete({minLength:0,source:u[a],select:function(e,i){thisParent=t(this).parents(".employee-skill-modal");var l=i.item;thisParent.find(".input-skill-modal[data-tbl="+a+"]:not([data-autocomplete=true])").each(function(){return!!t(this).hasClass("not-auto")||(inputType=t(this).attr("type"),dataCol=t(this).data("col"),void(dataCol&&(value=l[dataCol],"file"==inputType?(t(this).parents(".input-box-img-preview").length&&t(this).parents(".input-box-img-preview").find("img[data-col="+dataCol+"_preview]").attr("src",value),t(this).attr("disabled",!0).val("")):value&&void 0!=value?(value=t.parseHTML(value)[0].nodeValue,t(this).attr("disabled",!0).val(value)):t(this).attr("disabled",!0).val(""))))})}}).focus(function(){t(this).autocomplete("search")})}),t(".employee-skill-modal input[data-autocomplete=true]").on("keyup",function(a){if(13==a.keyCode);else{thisParent=t(this).parents(".employee-skill-modal");var e=t(this).data("tbl");thisParent.find("input[data-tbl="+e+"]:not([data-autocomplete=true])").each(function(){return inputType=t(this).attr("type"),"file"==inputType?(t(this).removeAttr("disabled"),!0):t(this).hasClass("not-auto")?(t(this).removeAttr("disabled"),!0):"id"==t(this).data("col")?(t(this).removeAttr("disabled").val(""),!0):(t(this).removeAttr("disabled"),!0)})}}),t(".employee-skill-modal .btn-action.btn-add, .employee-skill-modal .btn-action.btn-edit").on("click",function(a){var l=t(this).parents(".employee-skill-modal"),o=l.data("group");return formDomModal=l.find("form"),!(!formDomModal.length||formDomModal.valid())||void(l.find("input[type=file]").val()?(formDom=l.find("form.skill-modal-form"),formData=new FormData,formData.append("_token",s),formData.append("skill_type",o),formData.append("file",formDom.find("input[type=file]")[0].files[0]),t.ajax({url:formDom.attr("action"),type:"POST",data:formData,dataType:"json",processData:!1,contentType:!1,success:function(t){void 0!=t.error&&t.error?alert(t.error):(e(l,t),i(o)),l.modal("hide")}})):(e(l),i(o),l.modal("hide")))}),t(".employee-skill-modal .btn-action.btn-delete").on("click",function(a){thisDomModal=t(this).parents(".employee-skill-modal"),dataGroupType=thisDomModal.data("group"),dataId=thisDomModal.attr("data-id"),dataId=parseInt(dataId),0!=dataId&&(e(thisDomModal,null,"delete"),i(dataGroupType)),thisDomModal.modal("hide")}),t(".employee-skill-modal").scroll(function(){t("input").blur()}),t(".employee-skill-modal form").on("submit",function(t){t.preventDefault()}),t(".employee-skill-modal").on("hidden.bs.modal",function(a){t(this).find("input").removeAttr("disabled").val(""),t(this).find("img[data-col=image_preview]").attr("src",d)})}}(jQuery);