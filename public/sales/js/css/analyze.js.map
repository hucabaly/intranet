{"version":3,"sources":["analyze.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"analyze.js","sourcesContent":["/** \n * \n * iCheck load\n */\n$('input').iCheck({\n    checkboxClass: 'icheckbox_minimal-blue',\n    radioClass: 'iradio_minimal-blue'\n});   \n\n$(\"#dateRanger\").dateRangeSlider({\n    range: {min: new Date(2016, 0, 1)}, //use minimum range\n    bounds: {\n           min: new Date(2016, 0, 1),\n           max: new Date(2017, 11, 31, 12, 59, 59)\n            },\n    defaultValues: {\n           min: new Date(2016, 1, 10),\n           max: new Date(2017, 4, 22)\n            }\n\n});\n\n/**\n* click filter\n*/\nfunction filterAnalyze(token){\n    //hidden and clear empty apply old result\n    $(\".ketquaapply\").hide();\n    $(\"#danhsachduan tbody\").html('');\n    $(\"#duoi3sao tbody\").html('');\n    \n    //get criteria type\n    var criteriaType = $(\"input[name=tieuchi]:checked\").attr(\"id\");\n    \n    //get project type checked\n    var projectTypeIds = \"\";\n    $('input[type=checkbox][name=project_type]:checked').each(function(){\n        if(projectTypeIds == \"\"){\n            projectTypeIds = $(this).val();\n        } else{\n            projectTypeIds += \",\" + $(this).val();\n        }\n    });\n    \n    //get team checked\n    var teamIds = \"\";\n    $('input[class=team-tree-checkbox]:checked').each(function(){\n        if(teamIds == \"\"){\n            teamIds = $(this).attr(\"data-id\");\n        } else{\n            teamIds += \",\" + $(this).attr(\"data-id\");\n        }\n    });\n    \n    //check if don't any check project type or team\n    if(projectTypeIds == \"\"){\n        if(teamIds == \"\"){\n            $('#modal-warning').modal('show');\n            $('#modal-warning .modal-body').html(\"Chưa chọn loại dự án và team\");\n        }else{\n            $('#modal-warning').modal('show');\n            $('#modal-warning .modal-body').html(\"Chưa chọn loại dự án\");\n        }\n        return false;\n    }else{\n        if(teamIds == \"\"){\n            $('#modal-warning').modal('show');\n            $('#modal-warning .modal-body').html(\"Chưa chọn team\");\n            return false;\n        }\n    }\n\n    var startDate = $('.ui-rangeSlider-leftLabel .ui-rangeSlider-label-value').text();\n    var endDate = $('.ui-rangeSlider-rightLabel .ui-rangeSlider-label-value').text();\n    \n    $(\".apply-click-modal\").show();\n    $.ajax({\n        url: baseUrl + '/css/filter_analyze',\n        type: 'post',\n        data: {\n            _token: token, \n            startDate: startDate,\n            endDate: endDate,\n            projectTypeIds: projectTypeIds,\n            teamIds: teamIds,\n            criteriaType: criteriaType,\n        },\n    })\n    .done(function (data) { \n        $(\".apply-click-modal\").hide();\n        $(\"div.theotieuchi\").html(data);\n        $(\".tbl-criteria\").hide();\n        $(\".no-result\").hide();\n        $(\".no-result-\"+criteriaType).show();\n        $(document).trigger('icheck');\n        $(\"#startDate_val\").val(startDate);\n        $(\"#endDate_val\").val(endDate);\n        $(\"#teamIds_val\").val(teamIds);\n        $(\"#projectTypeIds_val\").val(projectTypeIds);\n        \n        var elem = $(\"table[data-id=\"+criteriaType+\"] tbody\");\n        elem.parent().show(); //Show filter table checked\n        fixScroll(elem);\n    })\n    .fail(function () {\n        alert(\"Ajax failed to fetch data\");\n    })\n}\n\n/**\n * Fix if filter table has scroll\n */\nfunction fixScroll(elem){  \n    if (typeof elem.get(0) !== 'undefined') {\n        var height = elem.height(); \n        var scrollHeight = elem.get(0).scrollHeight;\n        if(scrollHeight > height){\n            elem.parent().find('thead').css('width','98%');\n        }else{\n            elem.parent().find('thead').css('width','100%');\n        }\n    }\n}\n\n/**\n * apply filter\n * @param string token\n */\nfunction apply(token){\n    //get criteria type and id\n    var criteriaType = $(\"input[name=tieuchi]:checked\").attr(\"id\");\n    var criteriaIds = \"\";\n    \n    var classCriteriaCheck = getCriteriaChecked();\n    $('input[class='+classCriteriaCheck+']:checked').each(function(){\n        if(criteriaIds == \"\"){\n            if(classCriteriaCheck == \"checkQuestionItem\"){\n                if($(this).attr(\"data-questionid\")){\n                    criteriaIds = $(this).attr(\"data-questionid\");\n                }\n            }else{\n                criteriaIds = $(this).attr(\"data-id\");\n            }\n        } else{\n            if(classCriteriaCheck == \"checkQuestionItem\"){\n                if($(this).attr(\"data-questionid\")){\n                    criteriaIds += \",\" + $(this).attr(\"data-questionid\");\n                }\n            }else{\n                criteriaIds += \",\" + $(this).attr(\"data-id\");\n            }\n            \n        }\n    });\n    \n    if(criteriaIds == \"\"){\n        $('#modal-warning').modal('show');\n        $('#modal-warning .modal-body').html(\"Phải chọn ít nhất một dòng ở bảng tiêu chí.\");\n        return false;\n    }\n    \n    var teamIds = $(\"#teamIds_val\").val();\n    var projectTypeIds = $(\"#projectTypeIds_val\").val();\n    var startDate = $(\"#startDate_val\").val();\n    var endDate = $(\"#endDate_val\").val();\n    $(\".apply-click-modal\").show();\n    $.ajax({\n        url: baseUrl + '/css/apply_analyze',\n        type: 'post',\n        data: {\n            _token: token, \n            startDate: startDate,\n            endDate: endDate,\n            criteriaIds: criteriaIds,\n            teamIds: teamIds,\n            projectTypeIds: projectTypeIds,\n            criteriaType: criteriaType,\n        },\n    })\n    .done(function (data) { \n        $(\"#criteriaIds_val\").val(criteriaIds);\n        $(\"#criteriaType_val\").val(criteriaType);\n        $(\".apply-click-modal\").hide();\n        $(\".ketquaapply\").show();\n        if(criteriaType == \"tcQuestion\"){\n            $(\".box-select-question\").show();\n            $(\".box-select-question #question-choose\").html(data[\"htmlQuestionList\"]);\n            removeEmptyCate();\n        }else{\n            $(\".box-select-question\").hide();\n            $(\".box-select-question #question-choose\").html('');\n        }\n        $('html, body').animate({\n            scrollTop: $(\".ketquaapply\").offset().top\n        }, 100);\n        \n        //Fill data result list table\n        var countResult = data[\"cssResultPaginate\"][\"cssResultdata\"][\"data\"].length; \n        var html = \"\";\n        for(var i=0; i<countResult; i++){\n            html += \"<tr>\";\n            html += \"<td>\"+data[\"cssResultPaginate\"][\"cssResultdata\"][\"data\"][i][\"stt\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultPaginate\"][\"cssResultdata\"][\"data\"][i][\"project_name\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultPaginate\"][\"cssResultdata\"][\"data\"][i][\"teamName\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultPaginate\"][\"cssResultdata\"][\"data\"][i][\"pmName\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultPaginate\"][\"cssResultdata\"][\"data\"][i][\"css_end_date\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultPaginate\"][\"cssResultdata\"][\"data\"][i][\"css_result_created_at\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultPaginate\"][\"cssResultdata\"][\"data\"][i][\"point\"]+\"</td>\";\n            html += \"</tr>\";   \n        } \n        $(\"#danhsachduan tbody\").html(html);\n        $(\"#danhsachduan\").parent().find(\".pagination\").html(data[\"cssResultPaginate\"][\"paginationRender\"]);\n        //End fill data result list table\n        \n        //Get data to all result chart\n        var dataResult = [];\n        $.each(data['allResultChart'], function(key, value){ \n            dataResult.push({\n                x: new Date(value.date),\n                y: value.point,\n            });\n        });\n        \n        //Set data to all result chart\n        var chart = new CanvasJS.Chart(\"chartAll\",\n        {\n            animationEnabled: true,\n            theme: \"theme1\",\n            //exportEnabled: true,\n            axisX:{\n                valueFormatString: \"D/M/YY\",\n            },\n            axisY: {\n                \n            },\n            data: [{\n                type: 'line',\n                name: 'Điểm CSS',\n                showInLegend: true, \n                xValueFormatString:\"DD/MM/YYYY\",\n                dataPoints: dataResult,\n            }]\n        });\n\n        chart.render();\n        //End all result chart\n        \n        //Get data compare chart\n        var dataCompare = [];\n        $.each(data[\"compareChart\"], function(key, value) {\n            var points = [];\n            $.each(value.data,function(k, v){\n                points.push({\n                    x: new Date(v.date),\n                    y: v.point,\n                });\n            });\n            dataCompare.push({\n                type: 'line', \n                name: value.name,\n                showInLegend: true, \n                xValueFormatString:\"DD/MM/YYYY\",\n                dataPoints: points,\n            }); \n        });\n        \n        //Set data to compare chart\n        var chartCompare = new CanvasJS.Chart(\"chartFilter\",\n        {\n            animationEnabled: true,\n            theme: \"theme1\",\n            //exportEnabled: true,\n            axisX:{\n                valueFormatString: \"D/M/YY\",\n            },\n            axisY: {\n                \n            },\n            data: dataCompare,\n        });\n\n        chartCompare.render();\n\n        //end compare chart  \n        \n        //Fill data to Less 3* table and Proposed table\n        if(criteriaType != \"tcQuestion\"){\n            //Less 3* table\n            var countResult = data[\"lessThreeStar\"][\"cssResultdata\"].length; \n            html = \"\";\n            if(countResult > 0){\n                for(var i=0; i<countResult; i++){\n                    html += \"<tr>\";\n                    html += \"<td>\"+data[\"lessThreeStar\"][\"cssResultdata\"][i][\"no\"]+\"</td>\";\n                    html += \"<td>\"+data[\"lessThreeStar\"][\"cssResultdata\"][i][\"projectName\"]+\"</td>\";\n                    html += \"<td>\"+data[\"lessThreeStar\"][\"cssResultdata\"][i][\"questionName\"]+\"</td>\";\n                    html += \"<td>\"+data[\"lessThreeStar\"][\"cssResultdata\"][i][\"stars\"]+\"</td>\";\n                    html += \"<td>\"+data[\"lessThreeStar\"][\"cssResultdata\"][i][\"comment\"]+\"</td>\";\n                    html += \"<td>\"+data[\"lessThreeStar\"][\"cssResultdata\"][i][\"makeDateCss\"]+\"</td>\";\n                    html += \"<td>\"+data[\"lessThreeStar\"][\"cssResultdata\"][i][\"cssPoint\"]+\"</td>\";\n                    html += \"</tr>\";   \n                }\n                $(\"#duoi3sao tbody\").html(html);\n                $(\"#duoi3sao\").parent().find(\".pagination\").html(data[\"lessThreeStar\"][\"paginationRender\"]);\n            }else{\n                $(\"#duoi3sao tbody\").html(noResult);\n                $(\"#duoi3sao\").parent().find(\".pagination\").html('');\n            }\n            \n            //Proposed table\n            countResult = data[\"proposes\"][\"cssResultdata\"].length; \n            html = \"\";\n            if(countResult > 0){\n                for(var i=0; i<countResult; i++){\n                    html += \"<tr>\";\n                    html += \"<td>\"+data[\"proposes\"][\"cssResultdata\"][i][\"no\"]+\"</td>\";\n                    html += \"<td>\"+data[\"proposes\"][\"cssResultdata\"][i][\"projectName\"]+\"</td>\";\n                    html += \"<td>\"+data[\"proposes\"][\"cssResultdata\"][i][\"customerComment\"]+\"</td>\";\n                    html += \"<td>\"+data[\"proposes\"][\"cssResultdata\"][i][\"makeDateCss\"]+\"</td>\";\n                    html += \"<td>\"+data[\"proposes\"][\"cssResultdata\"][i][\"cssPoint\"]+\"</td>\";\n                    html += \"</tr>\";   \n                }\n                $(\"#danhsachdexuat tbody\").html(html);\n                $(\"#danhsachdexuat\").parent().find(\".pagination\").html(data[\"proposes\"][\"paginationRender\"]);\n            }else{\n                $(\"#danhsachdexuat\").parent().find(\".pagination\").html('');\n                $(\"#danhsachdexuat tbody\").html(noResult);\n            }\n            \n            //sort column by all result\n            $(\"#duoi3sao thead th\").attr('data-type','all');\n            $(\"#danhsachdexuat thead th\").attr('data-type','all');\n        }else{\n            $(\"#duoi3sao tbody\").html('');\n            $(\"#duoi3sao\").parent().find(\".pagination\").html('');\n            $(\"#danhsachdexuat tbody\").html('');\n            $(\"#danhsachdexuat\").parent().find(\".pagination\").html('');\n            \n            //sort column by all question\n            $(\"#duoi3sao thead th\").attr('data-type','question');\n            $(\"#danhsachdexuat thead th\").attr('data-type','question');\n        }\n        //Set css resultids \n        $('#cssResultIds').val(data[\"strResultIds\"]);\n    })\n    .fail(function () {\n        alert(\"Ajax failed to fetch data\");\n    })\n}\n\n/**\n * get checkbox in tables filter\n */\nfunction getCriteriaChecked(){\n    var criteriaType = $(\"input[name=tieuchi]:checked\").attr(\"id\");\n    if(criteriaType == \"tcProjectType\"){\n        return \"checkProjectTypeItem\";\n    }else if(criteriaType == \"tcTeam\"){\n        return \"checkTeamItem\";\n    }else if(criteriaType == \"tcPm\"){\n        return \"checkPmItem\";\n    }else if(criteriaType == \"tcBrse\"){\n        return \"checkBrseItem\";\n    }else if(criteriaType == \"tcCustomer\"){\n        return \"checkCustomerItem\";\n    }else if(criteriaType == \"tcSale\"){\n        return \"checkSaleItem\";\n    }else if(criteriaType == \"tcQuestion\"){\n        return \"checkQuestionItem\";\n    }\n}\n\nstrLoading = '<tr class=\"loading\"><td colspan=\"7\"><img class=\"loading-img\" src=\"'+baseUrl+'sales/images/loading.gif\" /></td></tr>';\nnoResult = '<tr><td colspan=\"7\" style=\"text-align:center;\">Không có kết quả nào được tìm thấy</td></tr>';\n\n/**\n * Show analyze project list paginate\n * @param int curpage\n * @param string token\n */\nfunction showAnalyzeListProject(curpage,token,orderBy,ariaType){\n    var startDate = $(\"#startDate_val\").val();\n    var endDate = $(\"#endDate_val\").val();\n    var criteriaIds = $(\"#criteriaIds_val\").val();\n    var teamIds = $(\"#teamIds_val\").val();\n    var projectTypeIds = $(\"#projectTypeIds_val\").val();\n    var criteriaType = getCriteriaType($(\"#criteriaType_val\").val());\n    \n    $(\"#danhsachduan tbody\").html(strLoading);\n    $.ajax({\n        url: baseUrl + 'css/show_analyze_list_project/'+criteriaIds+'/'+teamIds+'/'+ projectTypeIds+'/'+startDate+'/'+endDate+'/'+criteriaType+'/'+curpage+'/'+orderBy+'/'+ariaType,\n        type: 'post',\n        data: {\n            _token: token, \n        },\n    })\n    .done(function (data) { \n        var countResult = data[\"cssResultdata\"][\"data\"].length; \n        var html = \"\";\n        for(var i=0; i<countResult; i++){\n            html += \"<tr>\";\n            html += \"<td>\"+data[\"cssResultdata\"][\"data\"][i][\"stt\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultdata\"][\"data\"][i][\"project_name\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultdata\"][\"data\"][i][\"teamName\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultdata\"][\"data\"][i][\"pmName\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultdata\"][\"data\"][i][\"css_end_date\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultdata\"][\"data\"][i][\"css_result_created_at\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultdata\"][\"data\"][i][\"point\"]+\"</td>\";\n            html += \"</tr>\";   \n        }\n        $(\"#danhsachduan tbody\").html(html);\n        $(\"#danhsachduan\").parent().find(\".pagination\").html(data[\"paginationRender\"]);\n    })\n    .fail(function () {\n        alert(\"Ajax failed to fetch data\");\n    })\n}\n\n/**\n * Show less 3* list\n * @param int curpage\n * @param string token\n */\nfunction getListLessThreeStar(curpage,token,cssresultids,orderby,ariatype){\n    $(\"#duoi3sao tbody\").html(strLoading);\n    $.ajax({\n        url: baseUrl + 'css/get_list_less_three_star/'+cssresultids+'/'+curpage+'/'+orderby+'/'+ariatype,\n        type: 'post',\n        data: {\n            _token: token, \n        },\n    })\n    .done(function (data) { \n        var countResult = data[\"cssResultdata\"].length; \n        html = \"\";\n        if(countResult > 0){\n            for(var i=0; i<countResult; i++){\n                html += \"<tr>\";\n                html += \"<td>\"+data[\"cssResultdata\"][i][\"no\"]+\"</td>\";\n                html += \"<td>\"+data[\"cssResultdata\"][i][\"projectName\"]+\"</td>\";\n                html += \"<td>\"+data[\"cssResultdata\"][i][\"questionName\"]+\"</td>\";\n                html += \"<td>\"+data[\"cssResultdata\"][i][\"stars\"]+\"</td>\";\n                html += \"<td>\"+data[\"cssResultdata\"][i][\"comment\"]+\"</td>\";\n                html += \"<td>\"+data[\"cssResultdata\"][i][\"makeDateCss\"]+\"</td>\";\n                html += \"<td>\"+data[\"cssResultdata\"][i][\"cssPoint\"]+\"</td>\";\n                html += \"</tr>\";   \n            }\n            $(\"#duoi3sao tbody\").html(html);\n            $(\"#duoi3sao\").parent().find(\".pagination\").html(data[\"paginationRender\"]);\n        }else{\n            $(\"#duoi3sao tbody\").html(noResult);\n        }\n    })\n    .fail(function () {\n        alert(\"Ajax failed to fetch data\");\n    })\n}\n\n/**\n * Show proposes list\n * @param int curpage\n * @param string token\n */\nfunction getProposes(curpage,token,cssresultids,orderby,ariatype){\n    $(\"#danhsachdexuat tbody\").html(strLoading);\n    $.ajax({\n        url: baseUrl + 'css/get_proposes/'+cssresultids+'/'+curpage+'/'+orderby+'/'+ariatype,\n        type: 'post',\n        data: {\n            _token: token, \n        },\n    })\n    .done(function (data) { \n        //danh sach de xuat\n        var countResult = data[\"cssResultdata\"].length; \n        html = \"\";\n        for(var i=0; i<countResult; i++){\n            html += \"<tr>\";\n            html += \"<td>\"+data[\"cssResultdata\"][i][\"no\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultdata\"][i][\"projectName\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultdata\"][i][\"customerComment\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultdata\"][i][\"makeDateCss\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultdata\"][i][\"cssPoint\"]+\"</td>\";\n            html += \"</tr>\";   \n        }\n        $(\"#danhsachdexuat tbody\").html(html);\n        $(\"#danhsachdexuat\").parent().find(\".pagination\").html(data[\"paginationRender\"]);\n    })\n    .fail(function () {\n        alert(\"Ajax failed to fetch data\");\n    })\n}\n\n$(document).on('icheck', function(){\n    $('input').iCheck({\n        checkboxClass: 'icheckbox_minimal-blue',\n        radioClass: 'iradio_minimal-blue'\n    }); \n\n    var arrCetirea = ['ProjectType','Team','Pm','Brse','Customer','Sale'];\n    for(var i=0; i<arrCetirea.length; i++){ \n        // Make \"Item\" checked if checkAll are checked\n        $('#check'+arrCetirea[i]).on('ifChecked', function (event) {\n            var id = '.' + $(this).attr(\"id\") + \"Item\"; \n            $(id).iCheck('check');\n            triggeredByChild = false;\n        });\n\n        // Make \"Item\" unchecked if checkAll are unchecked\n        $('#check'+arrCetirea[i]).on('ifUnchecked', function (event) {\n            var id = '.' + $(this).attr(\"id\") + \"Item\"; \n            if (!triggeredByChild) {\n                $(id).iCheck('uncheck');\n            }\n            triggeredByChild = false;\n        });\n\n        // Remove the checked state from \"All\" if any checkbox is unchecked\n        $('.check'+arrCetirea[i]+'Item').on('ifUnchecked', function (event) {\n            triggeredByChild = true;\n            var id = '#' + $(this).attr(\"class\"); \n            id = id.replace(\"Item\",\"\"); \n            $(id).iCheck('uncheck');\n        });\n\n        // Make \"All\" checked if all checkboxes are checked\n        $('.check'+arrCetirea[i]+'Item').on('ifChecked', function (event) {\n            var id = '#' + $(this).attr(\"class\"); \n            id = id.replace(\"Item\",\"\");\n            if ($('.' + $(this).attr(\"class\")).filter(':checked').length == $('.' + $(this).attr(\"class\")).length) {\n                $(id).iCheck('check');\n            }\n        });\n    }\n    \n    /** iCheck event theotieuchi la cau hoi */  \n    // Make \"Item\" checked if checkAll are checked\n    $('.checkQuestionItem').on('ifChecked', function (event) {\n        var parent_id = $(this).attr('data-id');\n        $('.checkQuestionItem[parent-id='+parent_id+']').iCheck('check');\n        triggeredByChild = false;\n    });\n    \n    // Make \"Item\" unchecked if checkAll are unchecked\n    $('.checkQuestionItem').on('ifUnchecked', function (event) {\n        //if (!triggeredByChild) {\n            var parent_id = $(this).attr('data-id');\n            $('.checkQuestionItem[parent-id='+parent_id+']').iCheck('uncheck');\n        //}\n        triggeredByChild = false;\n    });\n\n    //show table project type\n    $('#tcProjectType').on('ifChecked', function (event) {\n        $('.tbl-criteria').hide(); \n        $('table[data-id=tcProjectType]').show();\n        $('.no-result').hide();\n        $('.no-result-tcProjectType').show();\n        \n        //Fix with table if has scroll\n        fixScroll($('table[data-id=tcProjectType] tbody'));\n    });\n\n    //show table team\n    $('#tcTeam').on('ifChecked', function (event) {\n        $('.tbl-criteria').hide();\n        $('table[data-id=tcTeam]').show();\n        $('.no-result').hide();\n        $('.no-result-tcTeam').show();\n        \n        //Fix with table if has scroll\n        fixScroll($('table[data-id=tcTeam] tbody'));\n    });\n\n    //show table pm\n    $('#tcPm').on('ifChecked', function (event) {\n        $('.tbl-criteria').hide();\n        $('table[data-id=tcPm]').show();\n        $('.no-result').hide();\n        $('.no-result-tcPm').show();\n        \n        //Fix with table if has scroll\n        fixScroll($('table[data-id=tcPm] tbody'));\n    });\n\n    //show table brse\n    $('#tcBrse').on('ifChecked', function (event) {\n        $('.tbl-criteria').hide();\n        $('table[data-id=tcBrse]').show();\n        $('.no-result').hide();\n        $('.no-result-tcBrse').show();\n        \n        //Fix with table if has scroll\n        fixScroll($('table[data-id=tcBrse] tbody'));\n    });\n\n    //show table customer\n    $('#tcCustomer').on('ifChecked', function (event) {\n        $('.tbl-criteria').hide();\n        $('table[data-id=tcCustomer]').show();\n        $('.no-result').hide();\n        $('.no-result-tcCustomer').show();\n        \n        //Fix with table if has scroll\n        fixScroll($('table[data-id=tcCustomer] tbody'));\n    });    \n\n    //show table sale\n    $('#tcSale').on('ifChecked', function (event) {\n        $('.tbl-criteria').hide();\n        $('table[data-id=tcSale]').show();\n        $('.no-result').hide();\n        $('.no-result-tcSale').show();\n        \n        //Fix with table if has scroll\n        fixScroll($('table[data-id=tcSale] tbody'));\n    }); \n\n    //show table question\n    $('#tcQuestion').on('ifChecked', function (event) {\n        $('.tbl-criteria').hide();\n        $('table[data-id=tcQuestion]').show();\n        $('.no-result').hide();\n        $('.no-result-tcQuestion').show();\n        fixScroll($('table[data-id=tcProjectType] tbody'));\n    }); \n}).trigger('icheck'); // trigger it for page load\n\n/**\n * Question less 3* change event\n */\n$(document).ready(function(){\n   $(\".box-select-question #question-choose\").change(function(){\n       $(\".box-select-question #question-choose option[value=0]\").remove();\n       var questionId = $(this).val(); \n       if(questionId == 0){\n           $(\"#duoi3sao tbody\").html('');\n           $(\"#duoi3sao\").parent().find(\".pagination\").html('');\n           $(\"#danhsachdexuat tbody\").html('');\n           $(\"#danhsachdexuat\").parent().find(\".pagination\").html('');\n       }else{\n           var curpage = 1;\n           var cssresultids = $(\"#question-choose option:selected\").data(\"cssresult\");\n           var token = $(\"#question-choose option:selected\").data(\"token\");\n           \n           getListLessThreeStarByQuestion(questionId,curpage,token,cssresultids,'result_make','asc');\n           getProposesQuestion(questionId,curpage,token,cssresultids,'result_make','asc');\n       }\n   }); \n});\n\n/**\n * Get less 3* list by question\n * @param int questionId\n * @param int curpage\n * @param string token\n * @param string cssresultids\n */\nfunction getListLessThreeStarByQuestion(questionId,curpage,token,cssresultids,orderby,ariatype){\n    $(\"#duoi3sao tbody\").html(strLoading);\n    $.ajax({\n        url: baseUrl + 'css/get_list_less_three_star_question/'+questionId+'/'+cssresultids+'/'+curpage+'/'+orderby+'/'+ariatype,\n        type: 'post',\n        data: {\n            _token: token, \n        },\n    })\n    .done(function (data) {  console.log(data);\n        var countResult = data[\"cssResultdata\"].length; \n        html = \"\";\n        if(countResult > 0){\n            for(var i=0; i<countResult; i++){\n            html += \"<tr>\";\n            html += \"<td>\"+data[\"cssResultdata\"][i][\"no\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultdata\"][i][\"projectName\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultdata\"][i][\"questionName\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultdata\"][i][\"stars\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultdata\"][i][\"comment\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultdata\"][i][\"makeDateCss\"]+\"</td>\";\n            html += \"<td>\"+data[\"cssResultdata\"][i][\"cssPoint\"]+\"</td>\";\n            html += \"</tr>\";   \n            }\n            $(\"#duoi3sao tbody\").html(html);\n            $(\"#duoi3sao\").parent().find(\".pagination\").html(data[\"paginationRender\"]);\n        }else {\n            $(\"#duoi3sao tbody\").html(noResult);\n            $(\"#duoi3sao\").parent().find(\".pagination\").html('');\n        }\n    })\n    .fail(function () {\n        alert(\"Ajax failed to fetch data\");\n    })\n}\n\n/**\n * Show proposes list by question\n * @param int questionId\n * @param int curpage\n * @param string token\n * @param string cssresultids\n */\nfunction getProposesQuestion(questionId,curpage,token,cssresultids,orderby,ariatype){\n    $(\"#danhsachdexuat tbody\").html(strLoading);\n    $.ajax({\n        url: baseUrl + 'css/get_proposes_question/'+questionId+'/'+cssresultids+'/'+curpage+'/'+orderby+'/'+ariatype,\n        type: 'post',\n        data: {\n            _token: token, \n        },\n    })\n    .done(function (data) { \n        //danh sach de xuat\n        var countResult = data[\"cssResultdata\"].length; \n        html = \"\";\n        if(countResult > 0){\n            for(var i=0; i<countResult; i++){\n                html += \"<tr>\";\n                html += \"<td>\"+data[\"cssResultdata\"][i][\"no\"]+\"</td>\";\n                html += \"<td>\"+data[\"cssResultdata\"][i][\"projectName\"]+\"</td>\";\n                html += \"<td>\"+data[\"cssResultdata\"][i][\"customerComment\"]+\"</td>\";\n                html += \"<td>\"+data[\"cssResultdata\"][i][\"makeDateCss\"]+\"</td>\";\n                html += \"<td>\"+data[\"cssResultdata\"][i][\"cssPoint\"]+\"</td>\";\n                html += \"</tr>\";   \n            }\n            $(\"#danhsachdexuat tbody\").html(html);\n            $(\"#danhsachdexuat\").parent().find(\".pagination\").html(data[\"paginationRender\"]);\n        }else{\n            $(\"#danhsachdexuat tbody\").html(noResult);\n            $(\"#danhsachdexuat\").parent().find(\".pagination\").html('');\n        }\n    })\n    .fail(function () {\n        alert(\"Ajax failed to fetch data\");\n    })\n}\n\n/**\n * When apply is question type\n * In combobox question, remove empty cate (haven't any question)\n */\nfunction removeEmptyCate(){\n    var arr = []; // Storage questions id\n    var arrCate = []; // Storage not empty categories id\n    \n    // Get questions id\n    $(\"#question-choose option[data-type=question]\").each(function(){\n        arr.push($(this).attr('parent-id'));\n    });\n    \n    // Get not empty categories id\n    $(\"#question-choose option[class=parent]\").each(function(){\n        if(jQuery.inArray($(this).attr('data-id'), arr) !== -1){\n            arrCate.push($(this).attr('data-id'));\n            var parentId = $(this).attr('parent-id');\n            // If have parent category\n            if($(\"#question-choose option[class=parent][data-id=\"+parentId+\"]\").length > 0){\n                arrCate.push($(this).attr('parent-id'));\n                var elem = $(\"#question-choose option[class=parent][data-id=\"+parentId+\"]\");\n                var grandId = elem.attr('parent-id');\n                // If have grand parent category\n                if($(\"#question-choose option[class=parent][data-id=\"+grandId+\"]\").length > 0){\n                    arrCate.push(elem.attr('parent-id'));\n                }\n            }\n        }\n    });\n    \n    // Remove empty cate\n    $(\"#question-choose option[class=parent]\").each(function(){\n        if(jQuery.inArray($(this).attr('data-id'), arrCate) == -1 && $(this).attr('data-type') !== 'overview'){\n            $(this).remove();\n        }\n    });\n}\n\nfunction getCriteriaType(type){\n    switch(type){\n        case 'tcProjectType':\n            criteriaType = \"projectType\";\n            break;\n        case 'tcTeam':\n            criteriaType = \"team\";\n            break;\n        case 'tcPm':\n            criteriaType = \"pm\";\n            break;\n        case 'tcBrse':\n            criteriaType = \"brse\";\n            break;\n        case 'tcCustomer':\n            criteriaType = \"customer\";\n            break;\n        case 'tcSale':\n            criteriaType = \"sale\";\n            break;\n        case 'tcQuestion':\n            criteriaType = \"question\";\n            break;\n    }\n    return criteriaType;\n}\n\nfunction getDateDiff(date1,date2){\n    var date1 = new Date(date1);\n    var date2 = new Date(date2);\n    var timeDiff = Math.abs(date2.getTime() - date1.getTime());\n    var diffDays = Math.ceil(timeDiff / (1000 * 3600 * 24)); \n    return diffDays;\n}"],"sourceRoot":"/source/"}